# 第2章 寄存器

​		在CPU中：

​				运算器进行信息处理；

​				寄存器进行信息存储；

​				控制器控制各种器件进行操作。

​				内存总线连接各种器件，在它们之间进行数据的传送。



## 2.1 通用寄存器

（1）8086CPU的所有寄存器都是16位的，可以存放两个字节。 AX、BX、CX、DX这4个寄存器通常用来存放一般性的数据，被称为通用寄存器。

（2）可分为连个八位寄存器，可单独使用。

AX--AH/AL

BX--BH/BL

CX--CH/CL

DX--DH/DL

## 2.2 字在存储器中的存储

（1）8086CPU可以一次性处理以下两种尺寸的数据：

字节：byte， 可以存放在8位寄存器中

字： 记为word，一个字由两个字节组成，这两个字节分别称为这个字的高位字节和低位字节



## 2.3几条汇编指令

（1）

mov ax, 18 ----ax = 18

mov ah, 78 ----ah = 78

add ax, 8 ---- ax = ax + 8

mov ax, bx ---- ax = bx

add ax, bx ---- ax = ax + bx

（2）注意使用AX和AL加法的高位进位区别



## 检测点2.1

<img src="file:///E:\qq_file\qq_message\2422607447\Image\C2C\45FBAF5DBF9DC0BCA13A88A4EAD4EF00.png" alt="img" style="zoom: 25%;" />



## 2.4 物理地址

所有的内存单元构成的存储空间是一个一维的线性空间，每一个内存单元在这个空间中都有唯一的地址，这个唯一的地址称为物理地址。



## 2.5 16位结构的CPU

（1）8086为16位地址CPU

运算器一次最多可以处理16位数据

寄存器的最大宽度为16位

寄存器和运算器之间的通路为16位

## 2.6 8086CPU给出物理地址的方法

（1）8086CPU有20位地址总线，可以传送20位地址，达到1MB寻址能力。

​		8086CPU采用一种在内部用两个16位地址合成的方法来形成一个20位的物理地址。

（2）段地址（16位）+ 偏移地址（16位） ---->  传到地址加法器 ---->合成20位物理地址

​			---->  地址加法器通过内部总线将物理地址送入输入输出控制电路---->送上地址总线---->传到存			储器

（3）地址加法器： 物理地址 = 短地址 x 16 + 偏移地址



## 2.7 “段地址x16 + 偏移地址 = 物理地址” 的本质含义

CPU在访问内存时，用一个基础地址（段地址x16）和一个相对于基础地址的偏移地址相加，给出内存单元的物理地址。



## 2.8 段的概念

段地址x16必然是16的倍数，所以一个段的起始地址也一定是16的倍数；偏移地址为16位，16位地址的寻址能力为64KB，所以一个段的长度最大为64KB。

## 检测点2.2 

<img src="file:///E:\qq_file\qq_message\2422607447\Image\C2C\EE93C8AF3FB180D4F97BD64E2F66B820.png" alt="img" style="zoom:25%;" />



## 2.9 段寄存器

段地址在段寄存器内存放，8086CPU有4个段 寄存器：CS、DS、SS、ES



## 2.10 CS和IP

（1）CS和IP是8086CPU中两个最关键的寄存器，指示了CPU当前要读取指令的地址。

（2）CS为代码段寄存器，IP为指令指针寄存器。

​			设CS中内容为M，IP中内容为N，8086CPU将从内存Mx16+N单元开始，读取一条指令并执行。

​		即：任意时刻，CPU将CS:IP指向的内容当作指令执行。

（3）8086CPU的工作过程可以简要描述如下：

​		**从CS:IP指向的内存单元读取指令，读取的指令进入指令缓冲器；**

​		**IP = IP + 所读取指令的长度，从而指向下一条指令**

​		**执行指令，返回步骤一，重复该过程。**

（4）在8086CPU加电启动或复位后，CS和IP被置为CS = FFFFH, IP = 0000H,因此FFFF0H单元中的指令是8086开机后执行的第一条指令。

## 2.11 修改CS、IP的指令

（1）mov指令不能用于设置CS、IP的值

（2）能够改变CS、IP的指令称为转移指令

（3）若想同时修改CS、IP的指令：JMP指令

​				“jmp 段地址：偏移地址”

​				jmp 2AE3:3	执行后：CS = 2AE3H， IP = 0003H

​				“jmp 某一合法寄存器”

​				jmp ax 执行前：ax = 1000H, CS = 2000H, IP = 0003H

​								执行后： ax = 1000H, CS = 2000H, IP = 1000H

​				“jmp ax，即 mov IP ax”

2.12 代码段

（1）CPU只认被CS:IP指向的内存单元中的内容为指令。

​				要让CPU执行放在代码段中的内容，要将CS:IP指向所定义的diamagnetic段中的第一条指令的首地址。



## 实验1 查看cpu和内存，用机器指令和汇编指令编程

该实验和直接参考哔站视频，debug模式下指令需要经常用才能记住。

<img src="C:\Users\王小北\AppData\Roaming\Typora\typora-user-images\image-20230513183611825.png" alt="image-20230513183611825" style="zoom:50%;" />