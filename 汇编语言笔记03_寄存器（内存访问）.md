# 第3章 寄存器（内存访问）

## 3.1 内存中字的存储

（1）cpu中，用16位寄存器来存储一个字。高8位存放字节，低8位存放低位字节。

（2）字单元，即存放一个字节型数据（16位）的内存单元，由两个地址连续的内存单元组成。高地址内存单元存放字型数据的高位字节，低地址内存单元存放字型数据的低位字节。

（3）将起始地址为N的字单元简称为N地址字单元。



## 3.2 DS和[address]

(1)8086CPU中有一个DS寄存器，通常用来存放要访问数据的段地址。



mov bx, 1000H

mov ds,bx

mov al,[0]



上面指令将10000H（1000：0）中的数据读到al中

（2）mov al,[0]

mov指令：a.将数据直接送入寄存器 b.将一个寄存器中的内容送入另一个寄存器

[...]表示一个内存单元，表示内存单元的偏移地址

此时8086CPU会自动取DS中的段地址

（3）

mov bx, 1000H

mov ds,bx

8086CPU不支持将数据直接送入段寄存器的操作

因此要先将1000H送入BX中



## 3.3 字的传送

（1）

mov bx,1000h

mov ds,bx

mov ax,[0]     ;1000:0处的字型数据送入ax

mov [0], cx	;cx中的16位数据送到1000：0处



## 3.4 mov、add、sub指令

（1）

mov	寄存器，数据

mov	寄存器，寄存器

mov	寄存器，内存单元

mov	内存单元，寄存器

mov	段寄存器，寄存器

（2）

add	寄存器，数据

add	寄存器，寄存器

add	寄存器，内存单元

add	内存单元，寄存器



sub	寄存器，数据

sub	寄存器，寄存器

sub	寄存器，内存单元

sub	内存单元，寄存器



## 3.5 数据段

将123b0h~123b9h的内存单元定义为数据段，累加这个数据段中的前三个单元。



mov	ax,123bh

mov	ds,ax				;将123bh送入ds中，作为数据段的段地址

mov	al,0					;用al存放累加结果

add	al,[0]					;将数据段第一个单元（偏移地址为0）中的数据加到al中

add	al,[1]

add	al,[2]



## 检测点3.1

<img src="file:///E:\qq_file\qq_message\2422607447\Image\C2C\8B692E2B76A6368EF6CBCD1B03E675FD.png" alt="img" style="zoom: 25%;" />

<img src="file:///E:\qq_file\qq_message\2422607447\Image\C2C\0E028964C1BAB64368C3F706D9CA833E.png" alt="img" style="zoom:25%;" />



## 3.6 栈

栈定义：

入栈：

出栈：

操作规则：后进先出 LIFO



## 3.7 CPU提供的栈机制

（1）8086CPU提供入栈和出栈指令

PUSH：		push ax 

POP：			pop ax

进栈和出栈操作都是以字为单位进行

（2）8086CPU中，有两个寄存器，段寄存器SS和寄存器SP，栈顶的段地址存放在SS中，偏移地址存放在SP中。

任意时刻，SS:SP指向栈顶元素。

push指令和pop指令执行时，CPU从SS和SP中得到栈顶的地址

（3）入栈时，栈顶从高地址向低地址方向增长 SP = SP-2

出栈时，栈顶从低地址向高地址方向增长 SP = SP+2



## 3.8 栈顶超界的问题

（1）栈顶超界危险

（2）8086CPU没有解决栈顶超界的问题



## 3.9 push、pop指令

push/pop + 寄存器/段寄存器/内存单元

（看懂几道例题即可）



## 3.10 栈段

如将一段长度为16字节的内存空间当作栈来用，以栈的方式进行访问，这段空间就可以称为一个栈段。

一个栈段的最大容量是64KB

## 检测点3.2

<img src="file:///E:\qq_file\qq_message\2422607447\Image\C2C\88D45B2FE1C016873A896674E3D0EBB7.png" alt="img" style="zoom:25%;" />









