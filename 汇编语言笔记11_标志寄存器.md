# 第11章	标志寄存器

（1）标志寄存器的作用：

用来存储相关指令的某些执行结果

用来为CPU执行相关指令提供行为依据

用来控制CPU的相关工作方式

（2）8086CPU的标志寄存器有16位，其中存储的信息通常被称程序状态字。

## 11.1 ZF标志

（1）flag的第6位是ZF，0标志位。它记录相关指令执行后，其结果是否为0。如果结果为0，那么zf=1；如果结果不为0，那么zf=0。

如：

mov ax,1

sub	ax,1

执行后，结果为0，则zf=1。

（2）add，sub,mul,div,inc,or,and这些运算指令对标志寄存器有影响。

## 11.2 PF标志

（1）flag的第2位是PF，奇偶标志位。

它记录相关指令执行后，其结果的所有bit位中1的个数是否为偶数。如果1的个数为偶数，pf=1，如果为奇数，那么pf=0。

## 11.3 SF标志

(1)falg的第7位是SF，符号标志位。它记录相关指令执行后，其结果是否为负。如果为负，sf=1；如果非负，sf=0。

（2）SF标志，就是CPU对有符号数运算结果的一种记录，它记录数据的正负。

## 11.4 CF标志

（1）flag的第0位是CF,进位标志位。一般情况下，在进行无符号运算的时候，它记录了运算结果的最高有效位向更高位的进位值，或从更高位的借位值。

## 11.5 OF标志

（1）在进行有符号运算的时候，如果超过了所能表示的范围称为溢出。

（2）flag的第11位是OF，溢出标志位。一般情况下，OF记录了有符号运算的结果是否发生了溢出。如果发生溢出，OF=1；如果没有，OF=0。

（1）CF和OF的区别：CF是对无符号数运算有意义的标志位，而OF是对有符号数运算有意义的标志位。

##   11.6 adc指令      

（1）adc是带进位加法指令，它利用了CF位上记录的进位值。

（2）

指令格式：adc操作对象1， 操作对象2

功能：操作对象1 = 操作对象1+操作对象2 +CF



## 11.7 sbb指令

(1)sbb是带借位减法指令，它利用了CF位上记录的借位值。

（2）

指令格式：sbb 操作对象1， 操作对象2

功能： 操作对象1 = 操作对象1-操作对象2-cf

## 11.8 cmp

（1）cmp是比较指令，cmp的功能相当于减法指令，只是不保存结果。

（2）

cmp指令格式： cmp 操作对象1， 操作对象2

功能：计算操作对象1-操作对象2 ，但并不保存结果，仅仅根据计算结果对标志寄存器进行设置。

## 11.9 检测比较结果的条件转移指令

（1）”转移“指的是它能够修改IP，而”条件“指的是它可以根据某种条件，决定是否修改IP。



## 11.10 DF标志和串发送指令

（1）flag的第10位是DF,方向标志位。在串处理指令中，控制每次操作后si、di的增减。

df = 0	每次操作后si、di递增

df = 1	每次操作后si、di递减

（1）一个串传送指令

格式：	movsb

功能：	执行movsb指令相当于进行下面几步操作：

用汇编语言描述movsb的功能如下：

mov	es:[di], byte ptr ds:[si]	;8086并不支持这样的指令，这里只是描述

如果df=0;

inc si

inc di

如果df=1

dec si

dec di

可以看出，movsb的功能是将ds:si指向的内存单元中的字节送入es:di中，然后根据标志寄存器df位的值。将si和di递增或递减。



## 11.11 pushf和popf

​	pushf的功能是将标志寄存器的值压栈，而popf是从栈中弹出数据，送入标志寄存器。



## 11.12 标志寄存器在debug中的表示

